import{r as n,Q as T,a as t,F as m,j as l}from"./index.5a85093a.js";import"./index.esm.27038d76.js";import{b as S}from"./index.91645ed2.js";import{M as w,B as N}from"./Modal.f44a4947.js";import{T as O}from"./Textinput.a54277f9.js";import{a as h}from"./axios.74c9240f.js";import"./iconBase.ebd08f81.js";const A=()=>{const x=["Less Than 50L","50L-1CR","1CR-2CR","2CR-5CR","5CR-7.5CR","7.5CR-10CR","10CR-20CR","50CR-100CR","100CR-200CR","More Than 200CR"],[c,d]=n.exports.useState(!1),[o,v]=n.exports.useState([]),[a,i]=n.exports.useState({year:"",turnover:"",exactTurnover:""}),f=localStorage.getItem("user"),g=JSON.parse(f),b=localStorage.getItem("profile"),u=JSON.parse(b);console.log(17,u),n.exports.useEffect(()=>{h.get(`https://constrobackend17-4.onrender.com/api/get_service_provider_regid/${g.user._id}`).then(e=>{if(console.log(66,e),!e.data.Result)T.error(e.data.message);else{d(!0),console.log("Data Fetch",e.data.Result);const r=e.data.Result;console.log("Show Data",r.turnover),v(r.turnover)}}).catch(e=>{console.log(e)})},[c]);const C=()=>{const e={turnover:[...o,{...a}]};console.log(72,e),h.put(`https://constrobackend17-4.onrender.com/api/update_Service_Provider/${u._id}`,e).then(r=>{console.log("res",r)}).catch(r=>{console.log(r)}),d(!c)},y=e=>{o[e];const r=o.filter((s,R)=>R!==e);console.log(r);const p={turnover:r};console.log(72,p),h.put(`https://constrobackend17-4.onrender.com/api/update_Service_Provider/${u._id}`,p).then(s=>{console.log("res",s)}).catch(s=>{console.log(s)}),d(!c)};return t(m,{children:l("div",{className:"shadow-md p-4",children:[l("div",{className:"flex justify-between items-center",children:[t("span",{className:"my-2 text-lg font-semibold text-slate-500",children:"Yearly Turnover"}),t("div",{children:t(w,{title:"",label:"Add Turnover + ",labelClass:"bg-[#00adee] hover:bg-[#6fcaeb] text-white",uncontrol:!0,footerContent:t(N,{text:"Add turnover",className:"w-full bg-[#00adee] hover:bg-[#6fcaeb] text-white",onClick:()=>{C()}}),children:l("div",{className:"text-base text-slate-600 dark:text-slate-300 mt-2 py-2",children:[l("div",{class:"input-group mt-2",children:[t("label",{for:"formFile",class:"form-label",children:"Select year"}),l("select",{class:"form-select text-sm py-3","aria-label":"Default select example",onChange:e=>{i({...a,year:e.target.value})},children:[t("option",{value:"",disabled:!0,selected:!0,children:"Select Year"}),["2023-2024","2022-2023","2021-2022","2020-2021"].filter(e=>!o.some(r=>r.year===e)).map((e,r)=>t("option",{value:e,children:e},r))]})]}),l("div",{class:"input-group mt-3",children:[t("label",{for:"formFile",class:"form-label",children:"Select turnover range"}),l("select",{class:"form-select text-sm py-3","aria-label":"Default select example",onChange:e=>{i({...a,turnover:e.target.value})},children:[t("option",{value:"1",selected:!0,children:"Less than 50L"}),t("option",{value:"",children:"Select"}),x.map((e,r)=>t("option",{value:e,children:e},r))]})]}),l("div",{class:"mb-2  mt-3",children:[t("label",{for:"formFile",class:"form-label",children:"Exact turnover"}),t(O,{type:"text",placeholder:"",onChange:e=>{i({...a,exactTurnover:e.target.value})}})]})]})})})]}),t("div",{class:"overflow-x-auto mt-3",children:l("table",{class:"table-auto w-full shadow-sm rounded-md",children:[t("thead",{class:"border border-collapse bg-[#00adee] text-white",children:l("tr",{className:" rounded-md",children:[t("th",{class:"px-4 py-2 text-center border",children:"Financial Year"}),t("th",{class:"px-4 py-2 text-center border",children:"Turnover Range"}),t("th",{class:"px-4 py-2 text-center border",children:"Exact Turnover"}),t("th",{class:"px-4 py-2 text-center border",children:"Action"})]})}),t("tbody",{children:o.map((e,r)=>t(m,{children:l("tr",{className:"hover:bg-[#f8f8f8] shadow-sm",children:[t("td",{class:"px-4 py-2 text-center text-sm text-slate-500",children:e.year}),t("td",{class:"px-4 py-2 text-center text-sm text-slate-500",children:e.turnover}),t("td",{class:"px-4 py-2 text-center text-sm text-slate-500",children:e.exactTurnover!=0?e.exactTurnover:"-"}),t("td",{class:"px-4 py-2 text-sm text-slate-500 flex justify-center",children:t("button",{onClick:()=>y(r),children:t(S,{className:"text-3xl cursor-pointer hover:text-[#00adee]"})})})]})}))})]})})]})})};export{A as default};
